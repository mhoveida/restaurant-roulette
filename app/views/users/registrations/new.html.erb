<% content_for :body_class, "bg-black" %>
<% content_for :skip_main_container, true %>

<div class="auth-page-wrapper">
  <div class="auth-container" data-controller="auth-form">
  <!-- Tab Navigation -->
  <div class="auth-tabs">
    <button class="auth-tab-button" data-auth-form-target="loginTab" data-action="click->auth-form#switchToLogin">
      Log In
    </button>
    <button class="auth-tab-button active" data-auth-form-target="signupTab" data-action="click->auth-form#switchToSignup">
      Sign Up
    </button>
  </div>

  <!-- Login Form -->
  <div class="auth-form-container" id="login-form" data-auth-form-target="loginForm" style="display: none;">
    <h1 class="auth-title">Log In</h1>

    <% if resource.errors.any? && @login_attempted && !current_user %>
      <div class="validation-message">
        <% resource.errors.full_messages.each do |msg| %>
          <div><%= msg %></div>
        <% end %>
      </div>
    <% elsif @login_attempted && !current_user %>
      <div class="validation-message">
        Invalid email or password
      </div>
    <% end %>

    <form action="<%= session_path(resource_name) %>" method="post" data-turbo="false" id="login-form-element">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

      <% if devise_mapping.rememberable? %>
        <div class="remember-me-section" style="display: none;">
          <input type="checkbox" id="user_remember_me" name="user[remember_me]" value="1">
          <label for="user_remember_me">Remember me</label>
        </div>
      <% end %>

      <div class="form-group">
        <label for="user_email">Email address</label>
        <input type="email" id="user_email" name="user[email]" placeholder="Enter your email" autofocus autocomplete="email">
      </div>

      <div class="form-group">
        <label for="login-password">Password</label>
        <div class="password-input-wrapper">
          <input type="password" id="login-password" name="user[password]" placeholder="Enter your password" data-auth-form-target="loginPassword" autocomplete="current-password">
          <button type="button" class="password-toggle" data-action="click->auth-form#toggleLoginPassword">
            üëÅÔ∏è
          </button>
        </div>
      </div>

      <div class="auth-actions">
        <button type="submit" class="button auth-button" data-auth-form-target="loginButton">Log In</button>
      </div>
    </form>
  </div>

  <!-- Signup Form -->
  <div class="auth-form-container" id="signup-form" data-auth-form-target="signupForm">
    <h1 class="auth-title">Sign Up</h1>

    <% if resource.errors.any? && @signup_attempted %>
      <div class="validation-message">
        <% resource.errors.full_messages.each do |msg| %>
          <div><%= msg %></div>
        <% end %>
      </div>
    <% end %>

    <form action="<%= registration_path(resource_name) %>" method="post" data-turbo="false" id="signup-form-element">
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>

      <div class="form-row">
        <div class="form-group">
          <label for="user_first_name">First name</label>
          <input type="text" id="user_first_name" name="user[first_name]" placeholder="Enter your first name">
        </div>

        <div class="form-group">
          <label for="user_last_name">Last name</label>
          <input type="text" id="user_last_name" name="user[last_name]" placeholder="Enter your last name">
        </div>
      </div>

      <div class="form-group">
        <label for="user_email">Email address</label>
        <input type="email" id="user_email" name="user[email]" placeholder="Enter your email" autocomplete="email">
      </div>

      <div class="form-group">
        <label for="signup-password">Password</label>
        <div class="password-input-wrapper">
          <input type="password" id="signup-password" name="user[password]" placeholder="Enter your password (min 8 characters)" data-auth-form-target="signupPassword" autocomplete="new-password">
          <button type="button" class="password-toggle" data-action="click->auth-form#toggleSignupPassword">
            üëÅÔ∏è
          </button>
        </div>
      </div>

      <div class="form-group">
        <label for="signup-password-confirmation">Confirm Password</label>
        <div class="password-input-wrapper">
          <input type="password" id="signup-password-confirmation" name="user[password_confirmation]" placeholder="Confirm your password" data-auth-form-target="signupPasswordConfirmation" autocomplete="new-password">
          <button type="button" class="password-toggle" data-action="click->auth-form#toggleSignupPasswordConfirmation">
            üëÅÔ∏è
          </button>
        </div>
      </div>

      <div class="auth-actions">
        <button type="submit" class="button auth-button">Sign Up</button>
      </div>
    </form>
  </div>
  </div>
</div>
